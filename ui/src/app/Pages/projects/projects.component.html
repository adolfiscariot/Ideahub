<app-base-layout>
    <div class="projects-page-container">
        <header class="page-header">
            <div>
                <h1 class="page-title">Projects</h1>
                <p class="page-subtitle">Manage and oversee ongoing initiatives.</p>
            </div>
        </header>

        <div class="card projects-card">
            <div class="table-responsive">
                <table class="projects-table">
                    <thead>
                        <tr>
                            <th class="col-title">Title</th>
                            <th class="col-desc">Description</th>
                            <th class="col-overseer">Overseen By</th>
                            <th class="col-status">Status</th>
                            <th class="col-date">Created At</th>
                            <th class="col-date">Ended At</th>
                            <th class="col-actions">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let project of projects" (click)="openEditModal(project)" class="clickable-row">
                            <td class="cell-title">
                                <div class="title-wrapper">
                                    <span class="project-title-text">{{ project.title }}</span>
                                    <div class="metadata-badges">
                                        <span class="meta-badge" *ngIf="project.groupName">
                                            <i class="fas fa-users"></i> {{ project.groupName }}
                                        </span>
                                        <span class="meta-badge" *ngIf="project.ideaTitle">
                                            <i class="fas fa-lightbulb"></i> Idea: {{ project.ideaTitle }}
                                        </span>
                                    </div>
                                </div>
                            </td>
                            <td class="cell-desc">
                                <span class="desc-text" [title]="project.description">{{ project.description }}</span>
                            </td>
                            <td class="cell-overseer">
                                <div class="user-info">
                                    <div class="avatar-circle">{{ project.overseenBy.charAt(0) }}</div>
                                    <span>{{ project.overseenBy }}</span>
                                </div>
                            </td>
                            <td class="cell-status">
                                <span class="badge" [ngClass]="getStatusClass(project.status)">
                                    {{ getStatusLabel(project.status) }}
                                </span>
                            </td>
                            <td class="cell-date">
                                {{ project.createdAt | date:'mediumDate' }}
                            </td>
                            <td class="cell-date">
                                <span *ngIf="project.endedAt">{{ project.endedAt | date:'mediumDate' }}</span>
                                <span *ngIf="!project.endedAt" class="text-muted">-</span>
                            </td>
                            <td class="cell-actions">
                                <button class="btn-icon" title="Edit Project" (click)="openEditModal(project)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-icon" title="View Details">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </td>
                        </tr>
                        <tr *ngIf="projects.length === 0" class="empty-state-row">
                            <td colspan="7">
                                <div class="empty-state">
                                    <i class="fas fa-project-diagram"></i>
                                    <p>No projects found yet.</p>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</app-base-layout>