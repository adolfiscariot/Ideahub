<div class="ideas-container" [class.sidebar-open]="selectedIdea">
  
  <!-- Header with Members Section -->
  <header class="ideas-header">
    <div class="header-content">
      
      <div class="header-actions">
        <!-- Members Section -->
        <div class="members-section" (click)="openMembersModal()">
          <div class="members-icon">ðŸ‘¥</div>
          <div class="members-info">
            
            <div class="members-count">{{ membersCount || 0 }} members</div>
            <div class="members-label">Click to view</div>
          </div>
        </div>
        
        <!-- Share Idea Button -->
        <button *ngIf="!showShareModal" class="create-idea-btn" (click)="openShareModal()">
          <span class="create-icon">+</span> Share Idea
        </button>
      </div>
    </div>
  </header>
  
  <!-- Section Header -->
  <div class="section-header">
    <h2 class="section-title">Ideas</h2>
    
    <div class="section-sort">
      <span class="sort-label">Sort by:</span>
      <div class="sort-options">
        <button class="sort-option active">Top Voted</button>
        <div class="sort-separator">|</div>
        <button class="sort-option">Newest</button>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading">
    <div class="spinner"></div>
    <p>Loading ideas...</p>
  </div>
  
  <!-- No Ideas State -->
  <div *ngIf="!isLoading && ideas.length === 0 && !showShareModal" class="no-ideas">
    <div class="no-ideas-content">
      <div class="no-ideas-icon">ðŸ’¡</div>
      <h3>No ideas yet</h3>
      <p>Be the first to share an idea with the group!</p>
      <button class="create-idea-btn" (click)="openShareModal()">
        <span class="create-icon">+</span> Share Idea
      </button>
    </div>
  </div>

  <!-- Ideas List -->
  <div *ngIf="!isLoading && ideas.length > 0" class="ideas-list">
    <ng-container *ngFor="let idea of ideas; let last = last; trackBy: trackById">
      <!-- Idea Card -->
      <div class="idea-card" (click)="selectIdea(idea)">
        <div class="idea-card-header">
          <div class="idea-header-top">
            <h3 class="idea-title">{{ idea.title }}</h3>
          </div>
          <div class="idea-card-meta">
            <span class="upvote-icon">â–²</span>
            <span class="upvote-count">{{ idea.voteCount || 0 }} votes</span>
            <span class="idea-date">{{ formatIdeaDate(idea.createdAt) }}</span>
          </div>
        </div>
        <p class="idea-description">
          {{ idea.description.length > 150 ? (idea.description | slice:0:150) + '...' : idea.description }}
          <span *ngIf="idea.description.length > 150" class="read-more">Read more</span>
        </p>
      </div>
      
      <!-- Divider -->
      <div *ngIf="!last" class="card-divider">
        <div class="divider-line"></div>
      </div>
    </ng-container>
  </div>

  <!-- Leave Group Button -->
  <div class="leave-group-section">
    <button class="leave-group-btn">
      Leave Group
    </button>
  </div>
</div>

<!-- Share Idea Modal Component -->
<app-share-idea-modal 
  *ngIf="showShareModal"
  [isVisible]="showShareModal"
  (close)="closeShareModal()"
  (share)="onShareIdea($event)">
</app-share-idea-modal>

<!-- Sidebar for Idea Details -->
<div *ngIf="selectedIdea" class="idea-sidebar-overlay" (click)="closeSidebar()"></div>

<aside class="idea-sidebar" [class.open]="selectedIdea">
  <div class="sidebar-header">
    <button class="sidebar-close-btn" (click)="closeSidebar()">
      <span>Ã—</span>
    </button>
    <h2 class="sidebar-title">Idea Details</h2>
  </div>
  
  <div class="sidebar-content" *ngIf="selectedIdea">
    <div class="sidebar-idea-header">
      <div class="sidebar-idea-header-top">
        <h3 class="sidebar-idea-title">{{ selectedIdea.title }}</h3>
        
      </div>
      <div class="sidebar-vote-section">
        <span class="upvote-icon">â–²</span>
        <span class="upvote-count">{{ selectedIdea.voteCount || 0 }} votes</span>
        <div class="sidebar-date">{{ formatIdeaDate(selectedIdea.createdAt) }}</div>
      </div>
    </div>
    
    <div class="sidebar-section">
      <h4 class="sidebar-section-title">Description</h4>
      <p class="sidebar-idea-description">{{ selectedIdea.description }}</p>
    </div>
    
    <!-- Delete button for idea owner -->
    <div class="sidebar-actions" *ngIf="isUserIdeaOwner(selectedIdea)">
      <button class="sidebar-action-btn delete" (click)="onDeleteIdea(selectedIdea.id)">
       Delete Idea
      </button>
    </div>
  </div>
</aside>