import{a as F,b as z,c as W,d as K,e as Q}from"./chunk-NEIDPOMA.js";import{a as w,b,c as S,d as G,g as D,h as I,i as T,l as E,m as k}from"./chunk-B4FG6HFE.js";import{a as L}from"./chunk-263ANN6R.js";import{a as $}from"./chunk-SLCOQ6HS.js";import{n as Y,s as J,t as H}from"./chunk-4YNICMPY.js";import{d as R,e as y,i as O,u as q}from"./chunk-P4JQYPRK.js";import{Bb as p,Cb as c,Ja as l,Kb as h,Mb as a,Nb as u,Ob as P,Ua as m,_a as M,a as U,b as B,ca as g,da as f,db as _,lb as V,nb as N,ob as d,pb as i,qb as o,rb as C,xb as v}from"./chunk-EDNIDIBE.js";function oe(r,n){r&1&&(i(0,"div",11),a(1," \u23F3 Your join request is pending approval "),o())}var j=class r{constructor(n,e){this.dialogRef=n;this.data=e}close(){this.dialogRef.close()}formatDate(n){if(!n)return"Unknown";try{return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}}static \u0275fac=function(e){return new(e||r)(m(F),m(z))};static \u0275cmp=M({type:r,selectors:[["app-group-details-modal"]],decls:40,vars:12,consts:[[1,"modal-container"],[1,"modal-header"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"modal-content"],[1,"detail-section"],[1,"description"],[1,"detail-grid"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],["class","pending-notice",4,"ngIf"],[1,"pending-notice"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"h2"),a(3,"Group Details"),o(),i(4,"button",2),p("click",function(){return t.close()}),i(5,"span"),a(6,"\xD7"),o()()(),i(7,"div",3)(8,"div",4)(9,"h3"),a(10),o(),i(11,"p",5),a(12),o()(),i(13,"div",6)(14,"div",7)(15,"span",8),a(16,"Status"),o(),i(17,"span",9),a(18),o()(),i(19,"div",7)(20,"span",8),a(21,"Created"),o(),i(22,"span",9),a(23),o()(),i(24,"div",7)(25,"span",8),a(26,"Members"),o(),i(27,"span",9),a(28),o()(),i(29,"div",7)(30,"span",8),a(31,"Ideas"),o(),i(32,"span",9),a(33),o()(),i(34,"div",7)(35,"span",8),a(36,"Created By"),o(),i(37,"span",9),a(38),o()()(),_(39,oe,2,0,"div",10),o()()),e&2&&(l(10),u(t.data.group.name),l(2),u(t.data.group.description),l(5),h("active",t.data.group.isActive)("inactive",!t.data.group.isActive),l(),P(" ",t.data.group.isActive?"Active":"Inactive"," "),l(5),u(t.formatDate(t.data.group.createdAt)),l(5),u(t.data.group.memberCount||0),l(5),u(t.data.group.ideaCount||0),l(5),u((t.data.group.createdByUser==null?null:t.data.group.createdByUser.displayName)||"Unknown"),l(),d("ngIf",t.data.group.hasPendingRequest))},dependencies:[O,y,H,J,Y],styles:[".modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:0;min-width:500px;max-width:900px;max-height:90vh;overflow:hidden}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e5e5e5;background:#f8f9fa}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#666;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center}.close-btn[_ngcontent-%COMP%]:hover{color:#333;background:#e5e5e5;border-radius:4px}.modal-content[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;max-height:calc(90vh - 140px)}.detail-section[_ngcontent-%COMP%]{margin-bottom:24px}.detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;font-size:20px;color:#1a1a1a}.description[_ngcontent-%COMP%]{color:#666;line-height:1.6;margin:0}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-top:20px}.detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.detail-label[_ngcontent-%COMP%]{font-size:12px;color:#666;text-transform:uppercase;letter-spacing:.5px}.detail-value[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#333}.detail-value.active[_ngcontent-%COMP%]{color:#28a745}.detail-value.inactive[_ngcontent-%COMP%]{color:#dc3545}.detail-value.member[_ngcontent-%COMP%]{color:#28a745}.detail-value.non-member[_ngcontent-%COMP%]{color:#666}.pending-notice[_ngcontent-%COMP%]{background:#fff3cd;border:1px solid #ffeaa7;color:#856404;padding:12px;border-radius:6px;margin-top:20px;text-align:center}.modal-footer[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #e5e5e5;display:flex;justify-content:flex-end;background:#f8f9fa}"]})};function re(r,n){r&1&&(i(0,"div",6),a(1,' You must type "DELETE" exactly to confirm deletion. '),o())}function ae(r,n){r&1&&a(0," Deleting... ")}function le(r,n){r&1&&a(0," Delete Group ")}var A=class r{constructor(n,e,t){this.dialogRef=n;this.data=e;this.fb=t;this.confirmForm=this.fb.group({confirmText:["",[b.required,b.pattern(/^DELETE$/)]]})}confirmForm;isSubmitting=!1;onConfirm(){this.confirmForm.valid&&(this.isSubmitting=!0,setTimeout(()=>{this.dialogRef.close("confirm")},500))}onCancel(){this.dialogRef.close()}get confirmText(){return this.confirmForm.get("confirmText")}static \u0275fac=function(e){return new(e||r)(m(F),m(z),m(E))};static \u0275cmp=M({type:r,selectors:[["app-delete-group-modal"]],decls:26,vars:8,consts:[[1,"delete-confirm-modal"],[1,"modal-content"],[1,"warning-icon"],[1,"group-name-warning"],[3,"ngSubmit","formGroup"],["type","text","formControlName","confirmText","placeholder","Type DELETE here","autocomplete","off",1,"confirm-input"],[1,"error-message"],[1,"modal-actions"],["type","button",1,"cancel-btn",3,"click","disabled"],["type","submit",1,"delete-btn",3,"disabled"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),a(3,"\u26A0\uFE0F"),o(),i(4,"h3"),a(5,"Delete Group"),o(),i(6,"p"),a(7,"Are you sure you want to delete this group? This action cannot be undone."),o(),i(8,"div",3),a(9," Group to delete: "),i(10,"strong"),a(11),o()(),i(12,"p"),a(13,"Type "),i(14,"strong"),a(15,'"DELETE"'),o(),a(16," to confirm:"),o(),i(17,"form",4),p("ngSubmit",function(){return t.onConfirm()}),C(18,"input",5),V(19,re,2,0,"div",6),i(20,"div",7)(21,"button",8),p("click",function(){return t.onCancel()}),a(22," Cancel "),o(),i(23,"button",9),V(24,ae,1,0)(25,le,1,0),o()()()()()),e&2&&(l(11),u(t.data.groupName),l(6),d("formGroup",t.confirmForm),l(),h("error",(t.confirmText==null?null:t.confirmText.invalid)&&(t.confirmText==null?null:t.confirmText.touched)),l(),N(t.confirmText!=null&&t.confirmText.invalid&&(t.confirmText!=null&&t.confirmText.touched)?19:-1),l(2),d("disabled",t.isSubmitting),l(2),d("disabled",t.confirmForm.invalid||t.isSubmitting),l(),N(t.isSubmitting?24:25))},dependencies:[k,D,w,S,G,I,T],styles:[".delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{text-align:center;padding:20px}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]{font-size:48px;color:#dc3545;margin-bottom:16px}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;color:#333}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .group-name-warning[_ngcontent-%COMP%]{background-color:#fff3cd;border:1px solid #ffeaa7;border-radius:6px;padding:12px;margin:16px 0;color:#856404}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .group-name-warning[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#dc3545}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .confirm-input[_ngcontent-%COMP%]{width:100%;padding:10px;border:2px solid #e5e5e5;border-radius:6px;margin:16px 0;font-size:14px}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .confirm-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#dc3545}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .confirm-input.error[_ngcontent-%COMP%]{border-color:#dc3545;background-color:#dc35450d}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:4px;text-align:left}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center;margin-top:20px}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 24px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;min-width:100px}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background-color:#fff;border:2px solid #6c757d;color:#6c757d}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#6c757d;color:#fff}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{background-color:#dc3545;border:2px solid #dc3545;color:#fff}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#c82333;border-color:#c82333}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:disabled{background-color:#dc3545;opacity:.5}"]})};function de(r,n){if(r&1){let e=v();i(0,"app-buttons",11),p("click",function(){g(e);let s=c();return f(s.toggleCreateForm())}),o()}r&2&&d("buttonText","Create Group")("buttonStyleClass","btn-create-group")("buttonType","button")}function se(r,n){r&1&&(i(0,"div",12),C(1,"div",13),i(2,"p"),a(3,"Loading groups..."),o()())}function ce(r,n){if(r&1){let e=v();i(0,"div",17)(1,"div",18),a(2,"+"),o(),i(3,"h3"),a(4,"No groups yet"),o(),i(5,"p"),a(6,"Be the first to create a group and start collaborating!"),o(),i(7,"app-buttons",11),p("click",function(){g(e);let s=c(2);return f(s.toggleCreateForm())}),o()()}r&2&&(l(7),d("buttonText","+ Create First Group")("buttonStyleClass","btn-create-first-group")("buttonType","button"))}function pe(r,n){r&1&&(i(0,"span",41),a(1,"Inactive"),o())}function ue(r,n){r&1&&(i(0,"span",42),a(1,"Deleted"),o())}function me(r,n){if(r&1){let e=v();i(0,"app-buttons",11),p("click",function(){g(e);let s=c().$implicit,x=c(3);return f(x.onViewIdeas(s.id))}),o()}r&2&&d("buttonText","\u{1F4A1} View Ideas")("buttonStyleClass","btn-view-ideas")("buttonType","button")}function ge(r,n){r&1&&(i(0,"div",43),a(1," \u23F3 Pending Approval "),o())}function fe(r,n){if(r&1){let e=v();i(0,"app-buttons",11),p("click",function(){g(e);let s=c().$implicit,x=c(3);return f(x.onJoinGroup(s.id))}),o()}r&2&&d("buttonText","Join Group")("buttonStyleClass","btn-join-group")("buttonType","button")}function _e(r,n){if(r&1){let e=v();i(0,"app-buttons",44),p("click",function(){g(e);let s=c().$implicit,x=c(3);return f(x.onDeleteGroup(s))}),o()}r&2&&d("buttonText","\u{1F5D1}\uFE0F")("buttonStyleClass","btn-delete-group")("buttonType","button")("title","Delete Group")}function xe(r,n){r&1&&(i(0,"div",45)(1,"span",46),a(2,"admin"),o()())}function be(r,n){if(r&1){let e=v();i(0,"div",21)(1,"div",22)(2,"div",23)(3,"h2",24),a(4),o(),i(5,"div",25),_(6,pe,2,0,"span",26)(7,ue,2,0,"span",27),o()(),i(8,"div",28)(9,"div",29),_(10,me,1,3,"app-buttons",6)(11,ge,2,0,"div",30)(12,fe,1,3,"app-buttons",6),o(),_(13,_e,1,4,"app-buttons",31),o()(),i(14,"p",32),a(15),o(),i(16,"div",33)(17,"div",34)(18,"span",35),a(19,"\u{1F465}"),o(),i(20,"span",36),a(21),o()(),i(22,"div",34)(23,"span",35),a(24,"\u{1F4A1}"),o(),i(25,"span",36),a(26),o()(),i(27,"div",34)(28,"span",35),a(29,"\u{1F4C5}"),o(),i(30,"span",37),a(31),o()()(),_(32,xe,3,0,"div",38),C(33,"hr",39),i(34,"div",40)(35,"app-buttons",11),p("click",function(){let s=g(e).$implicit,x=c(3);return f(x.openDetailsModal(s))}),o(),i(36,"app-buttons",11),p("click",function(){let s=g(e).$implicit,x=c(3);return f(x.openMembersModal(s))}),o()()()}if(r&2){let e=n.$implicit,t=c(3);l(4),u(e.name),l(2),d("ngIf",!e.isActive),l(),d("ngIf",e.isDeleted),l(3),d("ngIf",e.isMember),l(),d("ngIf",!e.isMember&&e.hasPendingRequest),l(),d("ngIf",!e.isMember&&!e.hasPendingRequest&&e.isActive&&!e.isDeleted),l(),d("ngIf",t.canConfigureGroup(e)),l(2),u(e.description),l(6),u(e.memberCount||0),l(5),P("",e.ideaCount||0," "),l(5),u(t.formatDate(e.createdAt)),l(),d("ngIf",t.canConfigureGroup(e)),l(3),d("buttonText","\u{1F4CB} Details")("buttonStyleClass","btn-group-details")("buttonType","button"),l(),d("buttonText","\u{1F465} Members")("buttonStyleClass","btn-group-members")("buttonType","button")}}function Ce(r,n){if(r&1&&(i(0,"div",19),_(1,be,37,18,"div",20),o()),r&2){let e=c(2);l(),d("ngForOf",e.groups)("ngForTrackBy",e.trackById)}}function ve(r,n){if(r&1&&(i(0,"div",14),_(1,ce,8,3,"div",15)(2,Ce,2,2,"div",16),o()),r&2){let e=c();l(),d("ngIf",e.groups.length===0),l(),d("ngIf",e.groups.length>0)}}function he(r,n){if(r&1){let e=v();i(0,"div",47)(1,"div",48)(2,"div",49)(3,"h3"),a(4,"Create New Group"),o(),i(5,"app-buttons",44),p("click",function(){g(e);let s=c();return f(s.onCancelCreate())}),o()(),i(6,"form",50),p("ngSubmit",function(){g(e);let s=c();return f(s.onCreateGroup())}),i(7,"div",51)(8,"label",52),a(9,"Group Name"),o(),C(10,"input",53),o(),i(11,"div",51)(12,"label",54),a(13,"Description"),o(),C(14,"textarea",55),o(),i(15,"div",56)(16,"app-buttons",57),p("click",function(){g(e);let s=c();return f(s.onCancelCreate())}),o(),C(17,"app-buttons",58),o()()()()}if(r&2){let e=c();l(5),d("buttonText","\xD7")("buttonStyleClass","btn-modal-close")("buttonType","button")("title","Close"),l(),d("formGroup",e.createGroupForm),l(4),h("error",(e.name==null?null:e.name.invalid)&&(e.name==null?null:e.name.touched)),l(4),h("error",(e.description==null?null:e.description.invalid)&&(e.description==null?null:e.description.touched)),l(2),d("buttonText","Cancel")("buttonStyleClass","btn-modal-cancel")("buttonType","button")("disabled",e.isSubmitting),l(),d("buttonText",e.isSubmitting?"Creating...":"Create Group")("buttonStyleClass","btn-modal-submit")("buttonType","submit")("disabled",e.createGroupForm.invalid||e.isSubmitting)}}var te=class r{constructor(n,e,t,s,x){this.groupsService=n;this.authService=e;this.dialog=t;this.router=s;this.fb=x;this.createGroupForm=this.fb.group({name:["",[b.required,b.minLength(3),b.maxLength(100)]],description:["",[b.required,b.minLength(10),b.maxLength(500)]]})}groups=[];title="Groups";subtitle="Explore and join groups to collaborate on ideas and projects.";showCreateForm=!1;createGroupForm;isSubmitting=!1;isLoading=!0;currentUserId=null;pendingRequests=new Map;ngOnInit(){this.currentUserId=this.authService.getCurrentUserId(),console.log("Current User ID on init:",this.currentUserId),this.loadGroups()}loadGroups(){this.isLoading=!0,this.groupsService.getGroups().subscribe({next:n=>{this.isLoading=!1,console.log("DEBUG - Full API response:",n),n.success&&n.data?(this.groups=n.data.map(e=>(console.log("Group:",{id:e.id,name:e.name,isMember:e.isMember,hasPendingRequest:e.hasPendingRequest,createdByUserId:e.createdByUserId,isCreator:e.createdByUserId===this.currentUserId}),B(U({},e),{id:e.id,name:e.name||e.Name,description:e.description||e.Description,isMember:e.isMember||e.IsMember||!1,hasPendingRequest:e.hasPendingRequest||e.HasPendingRequest||!1,memberCount:e.memberCount||e.MemberCount||0,ideaCount:e.ideaCount||e.IdeaCount||0,isActive:e.isActive||e.IsActive!==!1,isDeleted:e.isDeleted||e.IsDeleted||!1,createdAt:e.createdAt||e.CreatedAt||new Date().toISOString(),createdByUserId:e.createdByUserId||e.CreatedByUserId,createdByUser:e.createdByUser||e.CreatedByUser||{displayName:"Unknown",email:""}}))),console.log("Final groups state:"),this.groups.forEach((e,t)=>{console.log(`${t+1}. ${e.name}: creator=${e.createdByUserId}, currentUser=${this.currentUserId}, isCreator=${this.isGroupCreator(e)}`)})):(console.error("Failed to load groups:",n.message),this.groups=[])},error:n=>{this.isLoading=!1,console.error("Error loading groups:",n),this.groups=[]}})}openDetailsModal(n){this.dialog.open(j,{width:"600px",maxHeight:"90vh",data:{group:n},panelClass:"custom-modal"})}openMembersModal(n){this.dialog.open(Q,{width:"600px",maxHeight:"90vh",data:{group:n},panelClass:"custom-modal"})}openPendingRequestsModal(n){alert(`Pending requests for ${n.name}:

Feature coming soon!`)}onViewIdeas(n){let e=this.groups.find(s=>s.id===n);if(!e?.isMember){alert("You must be a member of this group to view ideas.");return}let t=this.isGroupCreator(e);this.router.navigate(["/groups",n,"ideas"],{state:{isGroupCreator:t,groupName:e.name,groupCreatorId:e.createdByUserId}})}onJoinGroup(n){let e=this.groups.find(t=>t.id===n);if(e?.isMember){alert("You are already a member of this group!");return}if(e?.hasPendingRequest){alert("You already have a pending request for this group!");return}this.groupsService.joinGroup(n).subscribe({next:t=>{t.success||t.status?(alert("Join request sent! Waiting for admin approval."),this.loadGroups()):t.message?.includes("already a member")?(alert("You are already a member of this group!"),this.loadGroups()):t.message?.includes("pending request")?(alert("You already have a pending request for this group!"),this.loadGroups()):alert(t.message||"Failed to send join request.")},error:t=>{console.error("Error joining group:",t),alert("Failed to send join request. Please try again.")}})}toggleCreateForm(){this.showCreateForm=!this.showCreateForm,this.showCreateForm||this.createGroupForm.reset()}onCreateGroup(){if(this.createGroupForm.invalid){this.createGroupForm.markAllAsTouched();return}this.isSubmitting=!0;let n=this.createGroupForm.value;this.groupsService.createGroup(n).subscribe({next:e=>{this.isSubmitting=!1,e.success||e.status?(alert("Group created successfully!"),this.loadGroups(),this.createGroupForm.reset(),this.showCreateForm=!1):e.message?.includes("authenticated")||e.message?.includes("User ID")||e.message?.includes("login")?alert("Please login to create a group."):alert(e.message||"Failed to create group.")},error:e=>{this.isSubmitting=!1,console.error("Error creating group:",e),e.status===401?alert("Please login to create a group."):e.status===400?alert("Invalid group data. Please check your input."):alert("Failed to create group. Please try again.")}})}onCancelCreate(){this.showCreateForm=!1,this.createGroupForm.reset()}isDeleting=!1;onDeleteGroup(n){this.dialog.open(A,{width:"400px",data:{groupName:n.name}}).afterClosed().subscribe(t=>{t==="confirm"&&this.deleteGroup(n.id)})}deleteGroup(n){this.isDeleting=!0,this.groupsService.deleteGroup(n).subscribe({next:e=>{this.isDeleting=!1,e.success?(alert("Group deleted successfully!"),this.groups=this.groups.filter(t=>t.id!==n),this.groups.length===0&&(this.title="No Groups",this.subtitle="All groups have been deleted.")):(alert(e.message||"Failed to delete group"),(e.message?.includes("permission")||e.message?.includes("admin")||e.message?.includes("not allowed"))&&alert("Only group admin can delete groups."))},error:e=>{this.isDeleting=!1,console.error("Error deleting group:",e),e.status===401?alert("Please login to delete groups."):e.status===403?alert("You do not have permission to delete this group."):e.status===404?alert("Group not found."):alert("Failed to delete group. Please try again.")}})}formatDate(n){if(!n)return"Unknown date";try{return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid date"}}formatMemberCount(n){return!n||n===0?"0 members":n===1?"1 member":`${n} members`}trackById(n,e){return e.id||n.toString()}isGroupCreator(n){if(!n||!n.createdByUserId||!this.currentUserId)return!1;let e=n.createdByUserId.toString().trim().toLowerCase(),t=this.currentUserId.toString().trim().toLowerCase();return console.log(`Comparing IDs: "${e}" === "${t}" = ${e===t}`),e===t}canConfigureGroup(n){return this.isGroupCreator(n)}hasPendingRequest(n){return this.pendingRequests.get(n)||!1}get name(){return this.createGroupForm.get("name")}get description(){return this.createGroupForm.get("description")}static \u0275fac=function(e){return new(e||r)(m(K),m(L),m(W),m(q),m(E))};static \u0275cmp=M({type:r,selectors:[["app-groups"]],decls:13,vars:6,consts:[[1,"groups-container"],[1,"groups-header"],[1,"header-content"],[1,"header-text"],[1,"page-title"],[1,"page-subtitle"],[3,"buttonText","buttonStyleClass","buttonType","click",4,"ngIf"],[1,"divider"],["class","loading",4,"ngIf"],["class","groups-list",4,"ngIf"],["class","create-group-modal-overlay",4,"ngIf"],[3,"click","buttonText","buttonStyleClass","buttonType"],[1,"loading"],[1,"spinner"],[1,"groups-list"],["class","no-groups",4,"ngIf"],["class","groups-grid",4,"ngIf"],[1,"no-groups"],[1,"no-groups-icon"],[1,"groups-grid"],["class","group-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"group-card"],[1,"group-header"],[1,"group-title-section"],[1,"group-name"],[1,"group-status"],["class","status-badge inactive",4,"ngIf"],["class","status-badge deleted",4,"ngIf"],[1,"group-header-right"],[1,"group-join-section"],["class","pending-status",4,"ngIf"],[3,"buttonText","buttonStyleClass","buttonType","title","click",4,"ngIf"],[1,"group-description"],[1,"group-stats"],[1,"stat"],[1,"stat-icon"],[1,"stat-count"],[1,"stat-date"],["class","admin-info",4,"ngIf"],[1,"group-divider"],[1,"group-actions"],[1,"status-badge","inactive"],[1,"status-badge","deleted"],[1,"pending-status"],[3,"click","buttonText","buttonStyleClass","buttonType","title"],[1,"admin-info"],[1,"admin-badge"],[1,"create-group-modal-overlay"],[1,"create-group-modal"],[1,"modal-header"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","groupName"],["id","groupName","type","text","formControlName","name","placeholder","Enter group name",1,"form-control"],["for","groupDescription"],["id","groupDescription","formControlName","description","placeholder","Describe what your group is about","rows","3",1,"form-control"],[1,"modal-actions"],[3,"click","buttonText","buttonStyleClass","buttonType","disabled"],[3,"buttonText","buttonStyleClass","buttonType","disabled"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"h1",4),a(5),o(),i(6,"p",5),a(7),o()(),_(8,de,1,3,"app-buttons",6),o()(),C(9,"hr",7),_(10,se,4,0,"div",8)(11,ve,3,2,"div",9)(12,he,18,17,"div",10),o()),e&2&&(l(5),u(t.title),l(2),u(t.subtitle),l(),d("ngIf",!t.showCreateForm&&!t.isLoading&&t.groups.length>0),l(2),d("ngIf",t.isLoading),l(),d("ngIf",!t.isLoading),l(),d("ngIf",t.showCreateForm))},dependencies:[O,R,y,k,D,w,S,G,I,T,$],styles:['html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{overflow-x:hidden}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}.groups-container[_ngcontent-%COMP%]{padding-left:150px;max-width:1700px;margin:0 auto}.groups-header[_ngcontent-%COMP%]{margin-bottom:24px}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap}.header-text[_ngcontent-%COMP%]{flex:1;min-width:300px}.page-title[_ngcontent-%COMP%]{margin:0 0 8px;font-size:32px;color:#000;font-weight:700}.page-subtitle[_ngcontent-%COMP%]{margin:0;color:#000;font-size:16px;max-width:600px}.create-group-header-btn[_ngcontent-%COMP%], .create-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;background:purple;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:600;cursor:pointer;transition:.2s}.create-group-header-btn[_ngcontent-%COMP%]:hover, .create-button[_ngcontent-%COMP%]:hover{background:#800080e6}.create-group-header-btn[_ngcontent-%COMP%]   .create-icon[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.divider[_ngcontent-%COMP%]{border:none;height:1px;background:#e5e7eb;margin:24px 0}.loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #f3f3f3;border-top:3px solid #800080;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000;font-size:16px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.no-groups[_ngcontent-%COMP%]{text-align:center;padding:60px 40px;border:2px dashed #e5e7eb;border-radius:12px;background:#fafafa;margin:40px 0}.no-groups[_ngcontent-%COMP%]   .no-groups-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:20px}.no-groups[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;color:#000;margin:0 0 12px;font-weight:600}.no-groups[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000;font-size:16px;max-width:400px;margin:0 auto 24px}.groups-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:24px;margin-top:20px}.group-card[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;padding:20px;background:#fff;box-shadow:0 1px 3px #0000001a;max-height:100%;display:flex;flex-direction:column;justify-content:space-between}.group-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px}.group-title-section[_ngcontent-%COMP%]{flex:1}.group-name[_ngcontent-%COMP%]{margin:0 0 8px;font-size:20px;color:#000;font-weight:700;line-height:1.3}.group-description[_ngcontent-%COMP%]{color:#000;line-height:1.5;margin:0 0 20px;font-size:14px;max-height:100px}.group-stats[_ngcontent-%COMP%]{display:flex;gap:24px;margin:20px 0;padding:12px 0;border-top:1px solid #eee;border-bottom:1px solid #eee}.stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2px}.stat[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:14px;opacity:.8}.stat[_ngcontent-%COMP%]   .stat-count[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#000;display:inline-block}.stat[_ngcontent-%COMP%]   .stat-date[_ngcontent-%COMP%]{color:#000;font-size:12px;opacity:.8}.group-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px;margin-top:20px}.action-button[_ngcontent-%COMP%]{flex:1 1 120px;min-width:0;max-width:100%;display:inline-flex;align-items:center;gap:6px;padding:8px 16px;border:1px solid #e0e0e0;background:#f8f8f8;border-radius:4px;font-size:14px;font-weight:500;color:#333;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:.2s}.action-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#e0e0e0}.action-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.action-button[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{font-size:14px;flex-shrink:0}.action-button[_ngcontent-%COMP%]   .count-badge[_ngcontent-%COMP%]{background:#000;color:#fff;border-radius:10px;padding:2px 8px;font-size:11px;font-weight:600;margin-left:4px}.group-join-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:8px;min-width:140px}.view-ideas-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:violet;color:#000;border:1px solid #ee82ee;border-radius:4px;font-size:14px;font-weight:600;cursor:pointer}.join-button[_ngcontent-%COMP%]{padding:8px 20px;background:purple;color:#fff;border:1px solid #800080;border-radius:4px;font-size:14px;font-weight:600;cursor:pointer}.pending-status[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100;padding:8px 12px;border-radius:4px;font-size:13px;border:1px solid #ffcc80;display:inline-flex;align-items:center;gap:6px}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:600}.status-badge.inactive[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.status-badge.deleted[_ngcontent-%COMP%]{background:#f5f5f5;color:#757575}.admin-info[_ngcontent-%COMP%]{margin:12px 0}.admin-badge[_ngcontent-%COMP%]{background:violet;color:#000;padding:4px 12px;border-radius:4px;font-size:13px;font-weight:600;display:inline-flex;align-items:center;gap:6px}.delete-group-btn[_ngcontent-%COMP%]{background:none;border:none;color:#f44336;font-size:18px;cursor:pointer;padding:8px;border-radius:4px;transition:.2s}.delete-group-btn[_ngcontent-%COMP%]:hover{background:#f443361a}.create-group-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;padding:20px}.create-group-modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 40px #0000001a}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e5e7eb}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px;color:#000;font-weight:700}.close-button[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;color:#000;cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center}form[_ngcontent-%COMP%]{padding:24px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px;position:relative}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#333;font-size:14px;line-height:1.4}.char-counter[_ngcontent-%COMP%]{float:right;font-size:12px;font-weight:400;color:#666}.char-counter.error[_ngcontent-%COMP%]{color:#dc3545;font-weight:700}.form-group[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 14px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;font-family:inherit;transition:.2s;display:block}textarea.form-control[_ngcontent-%COMP%]{min-height:120px;resize:vertical}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:6px}.error-message[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:2px 0}.form-control[_ngcontent-%COMP%]{max-width:420px;width:100%;margin:0 auto;padding:10px 14px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;font-family:inherit;transition:.2s;display:block}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:purple;box-shadow:0 0 0 2px #8000801a}.form-control.error[_ngcontent-%COMP%]{border-color:#f44336}textarea.form-control[_ngcontent-%COMP%]{min-height:120px;resize:vertical;display:block}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px;padding-top:20px;border-top:1px solid #e5e7eb}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 24px;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:.2s}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:#fff;border:1px solid #000;color:#000}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f5f5f5}.btn-primary[_ngcontent-%COMP%]{background:purple;border:1px solid #800080;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#800080e6}@media (max-width: 768px){.groups-container[_ngcontent-%COMP%]{padding:16px}.groups-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:16px}.create-group-header-btn[_ngcontent-%COMP%], .create-button[_ngcontent-%COMP%]{width:100%;justify-content:center}.group-stats[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.group-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.form-control[_ngcontent-%COMP%]{max-width:100%}}@media (max-width: 480px){.group-header[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.group-header-right[_ngcontent-%COMP%]{width:100%}.group-join-section[_ngcontent-%COMP%]{align-items:stretch}.view-ideas-button[_ngcontent-%COMP%], .join-button[_ngcontent-%COMP%]{width:100%;justify-content:center}.modal-actions[_ngcontent-%COMP%]{flex-direction:column}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}']})};export{te as GroupsComponent};
