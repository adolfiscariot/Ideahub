import{a as b}from"./chunk-6T7KYCCG.js";import{a as Z}from"./chunk-W7PV4I2I.js";import"./chunk-BB75FWJ4.js";import{f as j,l as z,o as B,p as G,s as $,t as U,u as V,w as Y,x as W}from"./chunk-73XDKHC7.js";import{A as L,Bb as R,Cb as F,Ja as c,Nb as a,O as P,Pb as H,Q as w,Ub as _,Vb as y,Z as m,Zb as D,_a as d,ca as A,da as O,lb as v,mb as h,n as u,nb as x,ob as f,pb as o,q as I,qb as i,rb as g,sb as E,tb as M,xb as N}from"./chunk-IXVHFNYV.js";var C=()=>{let t=m(b),e=m(U);return t.isLoggedIn$.pipe(I(n=>n?!0:e.createUrlTree(["/login"])))};var J=[{path:"",loadComponent:()=>import("./chunk-NY5LQNTJ.js").then(t=>t.LandingPageComponent)},{path:"register",loadComponent:()=>import("./chunk-ZC2V64UL.js").then(t=>t.RegisterComponent)},{path:"confirm-registration",loadComponent:()=>import("./chunk-BBTOQQZO.js").then(t=>t.ConfirmRegistrationComponent)},{path:"login",loadComponent:()=>import("./chunk-PKVNH552.js").then(t=>t.LoginPageComponent)},{path:"home",canActivate:[C],loadComponent:()=>import("./chunk-QTM43NP3.js").then(t=>t.HomeComponent)},{path:"groups",canActivate:[C],loadComponent:()=>import("./chunk-WPQLH7CD.js").then(t=>t.GroupsComponent)},{path:"projects",canActivate:[C],loadComponent:()=>import("./chunk-U7IHF7DM.js").then(t=>t.ProjectsComponent)},{path:"groups/:groupId/ideas",canActivate:[C],loadComponent:()=>import("./chunk-X5OESHRS.js").then(t=>t.IdeasComponent)}];var K=(t,e)=>{console.log("Interceptor working");let n=localStorage.getItem("accessToken"),r=m(b),l=t;return n&&(l=t.clone({headers:t.headers.set("Authorization",`Bearer ${n}`)})),e(l).pipe(w(p=>{}),L(p=>p.status===401?t.url.includes("/login")?u(()=>p):t.url.includes("/logout")?(r.logoutLocal(),u(()=>p)):t.url.includes("/refresh-token")?(r.logoutLocal(),u(()=>p)):(console.warn("Unauthorized request - attempting token refresh"),r.refreshToken().pipe(P(()=>{let s=localStorage.getItem("accessToken"),tt=t.clone({headers:t.headers.set("Authorization",`Bearer ${s}`)});return e(tt)}),L(s=>(console.error("Token refresh failed in interceptor",s),r.logoutLocal(),u(()=>s))))):(console.error(`Request to ${l.urlWithParams} failed`,p),u(()=>p))))};var Q={providers:[D({eventCoalescing:!0}),Y(J),B(G([K]))]};function et(t,e){t&1&&(o(0,"a",2),a(1,"Ideahub"),i()),t&2&&f("routerLink","/home")}function nt(t,e){t&1&&(o(0,"a",2),a(1,"Ideahub"),i()),t&2&&f("routerLink","/")}function ot(t,e){t&1&&(o(0,"nav",3)(1,"a",6),a(2,"Home"),i(),o(3,"a",7),a(4,"Groups"),i(),o(5,"a",8),a(6,"Projects"),i()())}function it(t,e){t&1&&(o(0,"nav",3)(1,"a",9),a(2,"About"),i(),o(3,"a",10),a(4,"Pricing"),i(),o(5,"a",11),a(6,"Contacts"),i(),o(7,"a",12),a(8,"Documentation"),i()())}function rt(t,e){if(t&1){let n=N();o(0,"app-buttons",13),R("click",function(){A(n);let l=F();return O(l.onLogout())}),i()}t&2&&f("buttonText","LOG OUT")("buttonStyleClass","btn-logout-navbar")("buttonType","button")}function at(t,e){t&1&&g(0,"app-buttons",14)(1,"app-buttons",14),t&2&&(f("buttonText","LOG IN")("buttonStyleClass","btn-login-navbar")("buttonType","button")("buttonLink","/login"),c(),f("buttonText","SIGN UP")("buttonStyleClass","btn-signup-navbar")("buttonType","button")("buttonLink","/register"))}var k=class t{date=new Date().getFullYear();authService=m(b);loggedInStatus=this.authService.isLoggedIn$;onLogout(){this.authService.logout().subscribe({next:e=>{console.log(`Logout successful. ${e.message}`)},error:e=>{console.error(`Logout failed: ${e.message}`)}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=d({type:t,selectors:[["app-navbar"]],decls:12,vars:9,consts:[[1,"navbar"],[1,"navbar-left"],[1,"product-text",3,"routerLink"],[1,"nav-items"],[1,"navbar-right"],[3,"buttonText","buttonStyleClass","buttonType"],["routerLink","/home",1,"nav-link"],["routerLink","/groups",1,"nav-link"],["routerLink","/projects",1,"nav-link"],["routerLink","/about",1,"nav-link"],["routerLink","/pricing",1,"nav-link"],["routerLink","/contacts",1,"nav-link"],["routerLink","/documentation",1,"nav-link"],[3,"click","buttonText","buttonStyleClass","buttonType"],[3,"buttonText","buttonStyleClass","buttonType","buttonLink"]],template:function(n,r){if(n&1&&(o(0,"div",0)(1,"div",1),v(2,et,2,1,"a",2),_(3,"async"),h(4,nt,2,1,"a",2),i(),v(5,ot,7,0,"nav",3),_(6,"async"),h(7,it,9,0,"nav",3),o(8,"div",4),v(9,rt,1,3,"app-buttons",5),_(10,"async"),h(11,at,2,8),i()()),n&2){let l,p,s;c(2),x((l=y(3,3,r.loggedInStatus))?2:4,l),c(3),x((p=y(6,5,r.loggedInStatus))?5:7,p),c(4),x((s=y(10,7,r.loggedInStatus))?9:11,s)}},dependencies:[Z,W,V,j],styles:["[_nghost-%COMP%]{display:block}.navbar[_ngcontent-%COMP%]{padding:0 50px;display:flex;justify-content:center;align-items:center;box-sizing:border-box;position:fixed;width:100%;top:0;left:0;z-index:1000;height:70px;gap:30px;background-color:#fff;border-bottom:1px solid #e2e8f0}.navbar-left[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:15px}.logo-image[_ngcontent-%COMP%]{height:40px;width:auto;object-fit:contain}.product-text[_ngcontent-%COMP%]{font-weight:700;font-size:1.2em;cursor:pointer}.nav-items[_ngcontent-%COMP%]{font-size:1em;display:flex;align-items:center;gap:20px;padding:0;margin-left:20px;cursor:pointer}.navbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:0;margin:0 0 0 auto;gap:20px}.btn-signup[_ngcontent-%COMP%]{background-color:violet}a[_ngcontent-%COMP%]{color:#000;text-decoration:none}"]})};var S=class t{year=new Date().getFullYear();static \u0275fac=function(n){return new(n||t)};static \u0275cmp=d({type:t,selectors:[["app-footer"]],decls:3,vars:1,consts:[[1,"footer"],[1,"footer-text"]],template:function(n,r){n&1&&(E(0,"div",0)(1,"span",1),a(2),M()()),n&2&&(c(2),H("",r.year," Ideahub. All Rights Reserved"))},styles:[".footer[_ngcontent-%COMP%]{margin-top:auto;padding:0;z-index:100;height:50px;display:flex;justify-content:center;position:fixed;width:100vw}.footer-text[_ngcontent-%COMP%]{font-size:.9em;text-align:center}"]})};var T=class t{title="Ideahub";static \u0275fac=function(n){return new(n||t)};static \u0275cmp=d({type:t,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"router-outlet"]],template:function(n,r){n&1&&(g(0,"app-navbar"),o(1,"div",0),g(2,"router-outlet"),i(),g(3,"app-footer"))},dependencies:[$,k,S],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100vh;overflow:hidden}.router-outlet[_ngcontent-%COMP%]{flex:1;width:100%;margin-top:70px;box-sizing:border-box;overflow:hidden;position:relative}"]})};z(T,Q).catch(t=>console.error(t));
