import{a as F,b as u,c as E,d as M,e as N,f as g,g as O,h as I,i as T,m as V}from"./chunk-K34U3AEV.js";import{a as S}from"./chunk-6T7KYCCG.js";import{a as R}from"./chunk-W7PV4I2I.js";import"./chunk-BB75FWJ4.js";import{t as P,u as y}from"./chunk-73XDKHC7.js";import{Bb as w,Cb as b,Ja as l,Nb as s,Z as h,_a as _,lb as m,nb as p,ob as x,pb as i,qb as o,rb as d}from"./chunk-IXVHFNYV.js";var D=t=>{let r=t.get("password"),e=t.get("confirmPassword");return r?.value===""||e?.value===""||(r?.value&&e?.value&&r?.value!==e?.value?e?.setErrors({passwordsDontMatch:!0}):e?.errors&&e.setErrors(null)),null};function k(t,r){t&1&&(i(0,"div",5),s(1," Please enter your name "),o())}function $(t,r){t&1&&(i(0,"span"),s(1," Please enter your email"),o())}function z(t,r){t&1&&(i(0,"span"),s(1," Please enter a valid email "),o())}function L(t,r){if(t&1&&(i(0,"div",5),m(1,$,2,0,"span"),m(2,z,2,0,"span"),o()),t&2){let e,n,a=b();l(),p(!((e=a.registrationForm.get("email"))==null||e.errors==null)&&e.errors.required?1:-1),l(),p(!((n=a.registrationForm.get("email"))==null||n.errors==null)&&n.errors.email?2:-1)}}function j(t,r){t&1&&(i(0,"div",5),s(1," Please enter your password "),o())}function B(t,r){t&1&&(i(0,"span"),s(1,"Confirm Password field is required"),o())}function Z(t,r){t&1&&(i(0,"span"),s(1,"Passwords don't match"),o())}function H(t,r){if(t&1&&(i(0,"div",5),m(1,B,2,0,"span"),m(2,Z,2,0,"span"),o()),t&2){let e,n,a=b();l(),p(!((e=a.registrationForm.get("confirmPassword"))==null||e.errors==null)&&e.errors.required?1:-1),l(),p(!((n=a.registrationForm.get("confirmPassword"))==null||n.errors==null)&&n.errors.passwordsDontMatch?2:-1)}}var v=class t{authService=h(S);router=h(P);ngOnInit(){}registrationForm=new N({displayName:new g("",{validators:[u.required],nonNullable:!0}),email:new g("",{validators:[u.required,u.email],nonNullable:!0}),password:new g("",{validators:[u.required,u.minLength(8),u.pattern(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[ !@#$%^&*()_+\\-=\\[\\]{}|\\;:'",.<>\\/?]).{8,}$`)],nonNullable:!0}),confirmPassword:new g("",{validators:[u.required],nonNullable:!0})},{validators:D});onSubmit(r){if(this.registrationForm.valid){let e=this.registrationForm.getRawValue();this.authService.register(e).subscribe({next:n=>{console.log(`Registration was successful: ${n.message}`),alert("Registration was successful"),this.router.navigate(["/confirm-registration"])},error:n=>{console.error(`Registration unsuccessful: ${n.errors}`),alert(`Registration failed.${n.value||"Please try again"}`)}}),this.registrationForm.reset()}else r.preventDefault(),this.registrationForm.markAllAsTouched(),alert("Please fill the form correctly")}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-registration-input"]],decls:23,vars:8,consts:[[1,"registration"],["id","registration-form",1,"registration-form",3,"ngSubmit","formGroup"],[1,"page-header"],[1,"form-section"],["id","name-input","type","text","placeholder","Name","formControlName","displayName"],[1,"error-message"],["id","email-input","type","email","placeholder","Email","formControlName","email"],["id","password-input","type","password","placeholder","Password","formControlName","password"],["id","confirm-password-input","type","password","placeholder","Confirm password","formControlName","confirmPassword"],[1,"submit-button"],[3,"buttonText","buttonStyleClass","buttonType"],["routerLink","/login"]],template:function(e,n){if(e&1&&(i(0,"div",0)(1,"form",1),w("ngSubmit",function(f){return n.onSubmit(f)}),i(2,"div",2),s(3,"Register"),o(),i(4,"div",3),d(5,"input",4),o(),m(6,k,2,0,"div",5),i(7,"div",3),d(8,"input",6),o(),m(9,L,3,2,"div",5),i(10,"div",3),d(11,"input",7),o(),m(12,j,2,0,"div",5),i(13,"div",3),d(14,"input",8),o(),m(15,H,3,2,"div",5),i(16,"div",9),d(17,"app-buttons",10),i(18,"p"),s(19,"Already have an account?"),o(),i(20,"a",11)(21,"u"),s(22,"Login here"),o()()()()()),e&2){let a,f,c,C;l(),x("formGroup",n.registrationForm),l(5),p((a=n.registrationForm.get("name"))!=null&&a.touched&&(!((a=n.registrationForm.get("name"))==null||a.errors==null)&&a.errors.required)?6:-1),l(3),p((f=n.registrationForm.get("email"))!=null&&f.touched?9:-1),l(3),p((c=n.registrationForm.get("password"))!=null&&c.touched&&(!((c=n.registrationForm.get("password"))==null||c.errors==null)&&c.errors.required)?12:-1),l(3),p((C=n.registrationForm.get("confirmPassword"))!=null&&C.invalid&&((C=n.registrationForm.get("confirmPassword"))!=null&&C.touched)?15:-1),l(2),x("buttonText","Register")("buttonStyleClass","btn-registration")("buttonType","submit")}},dependencies:[R,V,O,F,E,M,I,T,y],styles:[".page-header[_ngcontent-%COMP%]{margin-left:0;display:inline-block;font-size:1.5em;font-weight:550;text-align:left;width:100%;color:#5f015f}.registration-form[_ngcontent-%COMP%]:not(.page-header){background-color:plum;display:flex;flex-direction:column;align-items:center;gap:10px;padding:20px 30px;width:300px;border:1px solid purple;border-radius:50px}.form-section[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;margin-left:-10px}.form-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:auto;height:30px;width:100%;font-family:Century Gothic,CenturyGothic,AppleGothic,sans-serif;font-size:small;border-radius:5px;border:1px solid white}label[_ngcontent-%COMP%]{max-width:200px;text-align:right}.submit-button[_ngcontent-%COMP%]{width:100%;text-align:center}.submit-button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .submit-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:14px}input[_ngcontent-%COMP%]:hover{outline:1px solid purple}input[_ngcontent-%COMP%]:focus{outline:1px solid purple;border-bottom:2px solid purple;border-right:2px solid purple;border-left:2px solid purple}.error-message[_ngcontent-%COMP%]{color:red}a[_ngcontent-%COMP%]{color:#000}"]})};var A=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-register"]],decls:2,vars:0,consts:[[1,"register-page"]],template:function(e,n){e&1&&(i(0,"div",0),d(1,"app-registration-input"),o())},dependencies:[v],styles:[".register-page[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}"]})};export{A as RegisterComponent};
