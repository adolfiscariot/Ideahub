import{a as E,b as F,c as ee,d as te,e as ne}from"./chunk-6IJY33NR.js";import{a as O,b,c as w,d as S,g as G,h as D,i as I,l as T,m as k}from"./chunk-K34U3AEV.js";import{a as H}from"./chunk-EG45VNKT.js";import{a as W}from"./chunk-W7PV4I2I.js";import"./chunk-BB75FWJ4.js";import{a as Z}from"./chunk-CR47TK2X.js";import{n as K,s as Q,t as X}from"./chunk-3V7HVGDW.js";import{d as Y,e as P,i as y,t as J}from"./chunk-73XDKHC7.js";import{Bb as m,Cb as p,Ja as l,Jb as q,Lb as v,Nb as a,Ob as c,Pb as L,Ua as u,Xb as $,_a as M,a as N,b as B,ca as g,da as f,db as x,lb as j,nb as A,ob as s,pb as i,qb as o,rb as C,vb as U,wb as R,xb as h}from"./chunk-IXVHFNYV.js";function se(r,n){r&1&&(i(0,"div",11),a(1," \u23F3 Your join request is pending approval "),o())}var z=class r{constructor(n,e){this.dialogRef=n;this.data=e}close(){this.dialogRef.close()}formatDate(n){if(!n)return"Unknown";try{return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}}static \u0275fac=function(e){return new(e||r)(u(E),u(F))};static \u0275cmp=M({type:r,selectors:[["app-group-details-modal"]],decls:40,vars:12,consts:[[1,"modal-container"],[1,"modal-header"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"modal-content"],[1,"detail-section"],[1,"description"],[1,"detail-grid"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],["class","pending-notice",4,"ngIf"],[1,"pending-notice"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"h2"),a(3,"Group Details"),o(),i(4,"button",2),m("click",function(){return t.close()}),i(5,"span"),a(6,"\xD7"),o()()(),i(7,"div",3)(8,"div",4)(9,"h3"),a(10),o(),i(11,"p",5),a(12),o()(),i(13,"div",6)(14,"div",7)(15,"span",8),a(16,"Status"),o(),i(17,"span",9),a(18),o()(),i(19,"div",7)(20,"span",8),a(21,"Created"),o(),i(22,"span",9),a(23),o()(),i(24,"div",7)(25,"span",8),a(26,"Members"),o(),i(27,"span",9),a(28),o()(),i(29,"div",7)(30,"span",8),a(31,"Ideas"),o(),i(32,"span",9),a(33),o()(),i(34,"div",7)(35,"span",8),a(36,"Created By"),o(),i(37,"span",9),a(38),o()()(),x(39,se,2,0,"div",10),o()()),e&2&&(l(10),c(t.data.group.name),l(2),c(t.data.group.description),l(5),v("active",t.data.group.isActive)("inactive",!t.data.group.isActive),l(),L(" ",t.data.group.isActive?"Active":"Inactive"," "),l(5),c(t.formatDate(t.data.group.createdAt)),l(5),c(t.data.group.memberCount||0),l(5),c(t.data.group.ideaCount||0),l(5),c((t.data.group.createdByUser==null?null:t.data.group.createdByUser.displayName)||"Unknown"),l(),s("ngIf",t.data.group.hasPendingRequest))},dependencies:[y,P,X,Q,K],styles:[".modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:0;min-width:500px;max-width:900px;max-height:90vh;overflow:hidden}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e5e5e5;background:#f8f9fa}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#666;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center}.close-btn[_ngcontent-%COMP%]:hover{color:#333;background:#e5e5e5;border-radius:4px}.modal-content[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;max-height:calc(90vh - 140px)}.detail-section[_ngcontent-%COMP%]{margin-bottom:24px}.detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;font-size:20px;color:#1a1a1a}.description[_ngcontent-%COMP%]{color:#666;line-height:1.6;margin:0}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-top:20px}.detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.detail-label[_ngcontent-%COMP%]{font-size:12px;color:#666;text-transform:uppercase;letter-spacing:.5px}.detail-value[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#333}.detail-value.active[_ngcontent-%COMP%]{color:#28a745}.detail-value.inactive[_ngcontent-%COMP%]{color:#dc3545}.detail-value.member[_ngcontent-%COMP%]{color:#28a745}.detail-value.non-member[_ngcontent-%COMP%]{color:#666}.pending-notice[_ngcontent-%COMP%]{background:#fff3cd;border:1px solid #ffeaa7;color:#856404;padding:12px;border-radius:6px;margin-top:20px;text-align:center}.modal-footer[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #e5e5e5;display:flex;justify-content:flex-end;background:#f8f9fa}"]})};function pe(r,n){r&1&&(i(0,"div",6),a(1,' You must type "DELETE" exactly to confirm deletion. '),o())}function ce(r,n){r&1&&a(0," Deleting... ")}function me(r,n){r&1&&a(0," Delete Group ")}var V=class r{constructor(n,e,t){this.dialogRef=n;this.data=e;this.fb=t;this.confirmForm=this.fb.group({confirmText:["",[b.required,b.pattern(/^DELETE$/)]]})}confirmForm;isSubmitting=!1;onConfirm(){this.confirmForm.valid&&(this.isSubmitting=!0,setTimeout(()=>{this.dialogRef.close("confirm")},500))}onCancel(){this.dialogRef.close()}get confirmText(){return this.confirmForm.get("confirmText")}static \u0275fac=function(e){return new(e||r)(u(E),u(F),u(T))};static \u0275cmp=M({type:r,selectors:[["app-delete-group-modal"]],decls:26,vars:8,consts:[[1,"delete-confirm-modal"],[1,"modal-content"],[1,"warning-icon"],[1,"group-name-warning"],[3,"ngSubmit","formGroup"],["type","text","formControlName","confirmText","placeholder","Type DELETE here","autocomplete","off",1,"confirm-input"],[1,"error-message"],[1,"modal-actions"],["type","button",1,"cancel-btn",3,"click","disabled"],["type","submit",1,"delete-btn",3,"disabled"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),a(3,"\u26A0\uFE0F"),o(),i(4,"h3"),a(5,"Delete Group"),o(),i(6,"p"),a(7,"Are you sure you want to delete this group? This action cannot be undone."),o(),i(8,"div",3),a(9," Group to delete: "),i(10,"strong"),a(11),o()(),i(12,"p"),a(13,"Type "),i(14,"strong"),a(15,'"DELETE"'),o(),a(16," to confirm:"),o(),i(17,"form",4),m("ngSubmit",function(){return t.onConfirm()}),C(18,"input",5),j(19,pe,2,0,"div",6),i(20,"div",7)(21,"button",8),m("click",function(){return t.onCancel()}),a(22," Cancel "),o(),i(23,"button",9),j(24,ce,1,0)(25,me,1,0),o()()()()()),e&2&&(l(11),c(t.data.groupName),l(6),s("formGroup",t.confirmForm),l(),v("error",(t.confirmText==null?null:t.confirmText.invalid)&&(t.confirmText==null?null:t.confirmText.touched)),l(),A(t.confirmText!=null&&t.confirmText.invalid&&(t.confirmText!=null&&t.confirmText.touched)?19:-1),l(2),s("disabled",t.isSubmitting),l(2),s("disabled",t.confirmForm.invalid||t.isSubmitting),l(),A(t.isSubmitting?24:25))},dependencies:[k,G,O,w,S,D,I],styles:[".delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{text-align:center;padding:20px}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]{font-size:48px;color:#dc3545;margin-bottom:16px}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;color:#333}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .group-name-warning[_ngcontent-%COMP%]{background-color:#fff3cd;border:1px solid #ffeaa7;border-radius:6px;padding:12px;margin:16px 0;color:#856404}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .group-name-warning[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#dc3545}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .confirm-input[_ngcontent-%COMP%]{width:100%;padding:10px;border:2px solid #e5e5e5;border-radius:6px;margin:16px 0;font-size:14px}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .confirm-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#dc3545}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .confirm-input.error[_ngcontent-%COMP%]{border-color:#dc3545;background-color:#dc35450d}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:4px;text-align:left}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center;margin-top:20px}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 24px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;min-width:100px}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background-color:#fff;border:2px solid #6c757d;color:#6c757d}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#6c757d;color:#fff}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{background-color:#dc3545;border:2px solid #dc3545;color:#fff}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#c82333;border-color:#c82333}.delete-confirm-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:disabled{background-color:#dc3545;opacity:.5}"]})};function ue(r,n){if(r&1){let e=h();i(0,"app-buttons",12),m("click",function(){g(e);let d=p();return f(d.toggleCreateForm())}),o()}r&2&&s("buttonText","Create Group")("buttonStyleClass","btn-create-group")("buttonType","button")}function ge(r,n){r&1&&(i(0,"div",13),C(1,"div",14),i(2,"p"),a(3,"Loading groups..."),o()())}function fe(r,n){if(r&1){let e=h();U(0),i(1,"div",17)(2,"div",18),a(3,"+"),o(),i(4,"h3"),a(5,"No groups yet"),o(),i(6,"p"),a(7,"Be the first to create a group and start collaborating!"),o(),i(8,"app-buttons",12),m("click",function(){g(e);let d=p(2);return f(d.toggleCreateForm())}),o()(),R()}r&2&&(l(8),s("buttonText"," + Create First Group")("buttonStyleClass","btn-create-first-group")("buttonType","button"))}function _e(r,n){r&1&&(i(0,"div",38)(1,"span",39),a(2,"admin"),o()())}function xe(r,n){if(r&1){let e=h();i(0,"app-buttons",12),m("click",function(){g(e);let d=p().$implicit,_=p(3);return f(_.onViewIdeas(d.id))}),o()}r&2&&s("buttonText","\u{1F4A1} View Ideas")("buttonStyleClass","btn-view-ideas")("buttonType","button")}function be(r,n){r&1&&(i(0,"div",40),a(1," \u23F3 Pending Approval "),o())}function Ce(r,n){if(r&1){let e=h();i(0,"app-buttons",12),m("click",function(){g(e);let d=p().$implicit,_=p(3);return f(_.onJoinGroup(d.id))}),o()}r&2&&s("buttonText","Join Group")("buttonStyleClass","btn-join-group")("buttonType","button")}function he(r,n){if(r&1){let e=h();i(0,"app-buttons",41),m("click",function(){g(e);let d=p().$implicit,_=p(3);return f(_.onDeleteGroup(d))}),o()}r&2&&s("buttonText","\u{1F5D1}\uFE0F Delete")("buttonStyleClass","btn-delete-group")("buttonType","button")("title","Delete Group")}function ve(r,n){if(r&1){let e=h();i(0,"div",21)(1,"div",22)(2,"div",23)(3,"div",24)(4,"h2",25),a(5),o()(),x(6,_e,3,0,"div",26),o(),i(7,"p",27),a(8),o()(),i(9,"div",28)(10,"div",29)(11,"span",30),a(12,"\u{1F465}"),o(),i(13,"span",31),a(14),o()(),i(15,"div",29)(16,"span",30),a(17,"\u{1F4A1}"),o(),i(18,"span",31),a(19),o()(),i(20,"div",29)(21,"span",30),a(22,"\u{1F4C5}"),o(),i(23,"span",32),a(24),o()()(),C(25,"hr",33),i(26,"div",34),x(27,xe,1,3,"app-buttons",7)(28,be,2,0,"div",35)(29,Ce,1,3,"app-buttons",7),i(30,"div",36)(31,"app-buttons",12),m("click",function(){let d=g(e).$implicit,_=p(3);return f(_.openDetailsModal(d))}),o(),i(32,"app-buttons",12),m("click",function(){let d=g(e).$implicit,_=p(3);return f(_.openMembersModal(d))}),o(),x(33,he,1,4,"app-buttons",37),o()()()}if(r&2){let e=n.$implicit,t=p(3);l(5),c(e.name),l(),s("ngIf",t.canConfigureGroup(e)),l(2),c(e.description),l(6),c(e.memberCount||0),l(5),c(e.ideaCount||0),l(5),c(t.formatDate(e.createdAt)),l(3),s("ngIf",e.isMember),l(),s("ngIf",!e.isMember&&e.hasPendingRequest),l(),s("ngIf",!e.isMember&&!e.hasPendingRequest&&e.isActive&&!e.isDeleted),l(2),s("buttonText","\u{1F4CB} Details")("buttonStyleClass","btn-group-details")("buttonType","button"),l(),s("buttonText","\u{1F465} Members")("buttonStyleClass","btn-group-members")("buttonType","button"),l(),s("ngIf",t.canConfigureGroup(e))}}function Me(r,n){if(r&1&&(i(0,"div",19),x(1,ve,34,16,"div",20),o()),r&2){let e=p(2);l(),s("ngForOf",e.groups)("ngForTrackBy",e.trackById)}}function Pe(r,n){if(r&1&&(i(0,"div",15),x(1,fe,9,3,"ng-container",16)(2,Me,2,2,"ng-template",null,0,$),o()),r&2){let e=q(3),t=p();l(),s("ngIf",t.groups.length===0)("ngIfElse",e)}}function ye(r,n){if(r&1){let e=h();i(0,"div",42)(1,"div",43)(2,"div",44)(3,"h3"),a(4,"Create New Group"),o(),i(5,"app-buttons",41),m("click",function(){g(e);let d=p();return f(d.onCancelCreate())}),o()(),i(6,"form",45),m("ngSubmit",function(){g(e);let d=p();return f(d.onCreateGroup())}),i(7,"div",46)(8,"label",47),a(9,"Group Name"),o(),C(10,"input",48),o(),i(11,"div",46)(12,"label",49),a(13,"Description"),o(),C(14,"textarea",50),o(),i(15,"div",51)(16,"app-buttons",52),m("click",function(){g(e);let d=p();return f(d.onCancelCreate())}),o(),C(17,"app-buttons",53),o()()()()}if(r&2){let e=p();l(5),s("buttonText","\xD7")("buttonStyleClass","btn-modal-close")("buttonType","button")("title","Close"),l(),s("formGroup",e.createGroupForm),l(4),v("error",(e.name==null?null:e.name.invalid)&&(e.name==null?null:e.name.touched)),l(4),v("error",(e.description==null?null:e.description.invalid)&&(e.description==null?null:e.description.touched)),l(2),s("buttonText","Cancel")("buttonStyleClass","btn-modal-cancel")("buttonType","button")("disabled",e.isSubmitting),l(),s("buttonText",e.isSubmitting?"Creating...":"Create Group")("buttonStyleClass","btn-modal-submit")("buttonType","submit")("disabled",e.createGroupForm.invalid||e.isSubmitting)}}var ae=class r{constructor(n,e,t,d,_){this.groupsService=n;this.authService=e;this.dialog=t;this.router=d;this.fb=_;this.createGroupForm=this.fb.group({name:["",[b.required,b.minLength(3),b.maxLength(100)]],description:["",[b.required,b.minLength(10),b.maxLength(500)]]})}groups=[];title="Groups";subtitle="Explore and join groups to collaborate on ideas and projects.";showCreateForm=!1;createGroupForm;isSubmitting=!1;isLoading=!0;currentUserId=null;pendingRequests=new Map;ngOnInit(){this.currentUserId=this.authService.getCurrentUserId(),console.log("Current User ID on init:",this.currentUserId),this.loadGroups()}loadGroups(){this.isLoading=!0,this.groupsService.getGroups().subscribe({next:n=>{this.isLoading=!1,console.log("DEBUG - Full API response:",n),n.success&&n.data?(this.groups=n.data.map(e=>(console.log("Group:",{id:e.id,name:e.name,isMember:e.isMember,hasPendingRequest:e.hasPendingRequest,createdByUserId:e.createdByUserId,isCreator:e.createdByUserId===this.currentUserId}),B(N({},e),{id:e.id,name:e.name||e.Name,description:e.description||e.Description,isMember:e.isMember||e.IsMember||!1,hasPendingRequest:e.hasPendingRequest||e.HasPendingRequest||!1,memberCount:e.memberCount||e.MemberCount||0,ideaCount:e.ideaCount||e.IdeaCount||0,isActive:e.isActive||e.IsActive!==!1,isDeleted:e.isDeleted||e.IsDeleted||!1,createdAt:e.createdAt||e.CreatedAt||new Date().toISOString(),createdByUserId:e.createdByUserId||e.CreatedByUserId,createdByUser:e.createdByUser||e.CreatedByUser||{displayName:"Unknown",email:""}}))),console.log("Final groups state:"),this.groups.forEach((e,t)=>{console.log(`${t+1}. ${e.name}: creator=${e.createdByUserId}, currentUser=${this.currentUserId}, isCreator=${this.isGroupCreator(e)}`)})):(console.error("Failed to load groups:",n.message),this.groups=[])},error:n=>{this.isLoading=!1,console.error("Error loading groups:",n),this.groups=[]}})}openDetailsModal(n){this.dialog.open(z,{width:"600px",maxHeight:"90vh",data:{group:n},panelClass:"custom-modal"})}openMembersModal(n){this.dialog.open(ne,{width:"600px",maxHeight:"90vh",data:{group:n},panelClass:"custom-modal"})}openPendingRequestsModal(n){alert(`Pending requests for ${n.name}:

Feature coming soon!`)}onViewIdeas(n){let e=this.groups.find(d=>d.id===n);if(!e?.isMember){alert("You must be a member of this group to view ideas.");return}let t=this.isGroupCreator(e);this.router.navigate(["/groups",n,"ideas"],{state:{isGroupCreator:t,groupName:e.name,groupCreatorId:e.createdByUserId}})}onJoinGroup(n){let e=this.groups.find(t=>t.id===n);if(e?.isMember){alert("You are already a member of this group!");return}if(e?.hasPendingRequest){alert("You already have a pending request for this group!");return}this.groupsService.joinGroup(n).subscribe({next:t=>{t.success||t.status?(alert("Join request sent! Waiting for admin approval."),this.loadGroups()):t.message?.includes("already a member")?(alert("You are already a member of this group!"),this.loadGroups()):t.message?.includes("pending request")?(alert("You already have a pending request for this group!"),this.loadGroups()):alert(t.message||"Failed to send join request.")},error:t=>{console.error("Error joining group:",t),alert("Failed to send join request. Please try again.")}})}toggleCreateForm(){this.showCreateForm=!this.showCreateForm,this.showCreateForm||this.createGroupForm.reset()}onCreateGroup(){if(this.createGroupForm.invalid){this.createGroupForm.markAllAsTouched();return}this.isSubmitting=!0;let n=this.createGroupForm.value;this.groupsService.createGroup(n).subscribe({next:e=>{this.isSubmitting=!1,e.success||e.status?(alert("Group created successfully!"),this.loadGroups(),this.createGroupForm.reset(),this.showCreateForm=!1):e.message?.includes("authenticated")||e.message?.includes("User ID")||e.message?.includes("login")?alert("Please login to create a group."):alert(e.message||"Failed to create group.")},error:e=>{this.isSubmitting=!1,console.error("Error creating group:",e),e.status===401?alert("Please login to create a group."):e.status===400?alert("Invalid group data. Please check your input."):alert("Failed to create group. Please try again.")}})}onCancelCreate(){this.showCreateForm=!1,this.createGroupForm.reset()}isDeleting=!1;onDeleteGroup(n){this.dialog.open(V,{width:"400px",data:{groupName:n.name}}).afterClosed().subscribe(t=>{t==="confirm"&&this.deleteGroup(n.id)})}deleteGroup(n){this.isDeleting=!0,this.groupsService.deleteGroup(n).subscribe({next:e=>{this.isDeleting=!1,e.success?(alert("Group deleted successfully!"),this.groups=this.groups.filter(t=>t.id!==n),this.groups.length===0&&(this.title="No Groups",this.subtitle="All groups have been deleted.")):(alert(e.message||"Failed to delete group"),(e.message?.includes("permission")||e.message?.includes("admin")||e.message?.includes("not allowed"))&&alert("Only group admin can delete groups."))},error:e=>{this.isDeleting=!1,console.error("Error deleting group:",e),e.status===401?alert("Please login to delete groups."):e.status===403?alert("You do not have permission to delete this group."):e.status===404?alert("Group not found."):alert("Failed to delete group. Please try again.")}})}formatDate(n){if(!n)return"Unknown date";try{return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid date"}}formatMemberCount(n){return!n||n===0?"0 members":n===1?"1 member":`${n} members`}trackById(n,e){return e.id||n.toString()}isGroupCreator(n){if(!n||!n.createdByUserId||!this.currentUserId)return!1;let e=n.createdByUserId.toString().trim().toLowerCase(),t=this.currentUserId.toString().trim().toLowerCase();return console.log(`Comparing IDs: "${e}" === "${t}" = ${e===t}`),e===t}canConfigureGroup(n){return this.isGroupCreator(n)}hasPendingRequest(n){return this.pendingRequests.get(n)||!1}get name(){return this.createGroupForm.get("name")}get description(){return this.createGroupForm.get("description")}static \u0275fac=function(e){return new(e||r)(u(te),u(H),u(ee),u(J),u(T))};static \u0275cmp=M({type:r,selectors:[["app-groups"]],decls:14,vars:6,consts:[["gridView",""],[1,"groups-container"],[1,"groups-header"],[1,"header-content"],[1,"header-text"],[1,"page-title"],[1,"page-subtitle"],[3,"buttonText","buttonStyleClass","buttonType","click",4,"ngIf"],[1,"divider"],["class","loading",4,"ngIf"],["class","groups-list",4,"ngIf"],["class","create-group-modal-overlay",4,"ngIf"],[3,"click","buttonText","buttonStyleClass","buttonType"],[1,"loading"],[1,"spinner"],[1,"groups-list"],[4,"ngIf","ngIfElse"],[1,"no-groups"],[1,"no-groups-icon"],[1,"groups-grid"],["class","group-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"group-card"],[1,"group-top"],[1,"group-header"],[1,"group-title-section"],[1,"group-name"],["class","admin-info",4,"ngIf"],[1,"group-description"],[1,"group-stats"],[1,"stat"],[1,"stat-icon"],[1,"stat-count"],[1,"stat-date"],[1,"group-divider"],[1,"group-bottom"],["class","pending-status",4,"ngIf"],[1,"group-actions"],[3,"buttonText","buttonStyleClass","buttonType","title","click",4,"ngIf"],[1,"admin-info"],[1,"admin-badge"],[1,"pending-status"],[3,"click","buttonText","buttonStyleClass","buttonType","title"],[1,"create-group-modal-overlay"],[1,"create-group-modal"],[1,"modal-header"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","groupName"],["id","groupName","type","text","formControlName","name","placeholder","Enter group name",1,"form-control"],["for","groupDescription"],["id","groupDescription","formControlName","description","placeholder","Describe what your group is about","rows","3",1,"form-control"],[1,"modal-actions"],[3,"click","buttonText","buttonStyleClass","buttonType","disabled"],[3,"buttonText","buttonStyleClass","buttonType","disabled"]],template:function(e,t){e&1&&(i(0,"app-base-layout")(1,"div",1)(2,"header",2)(3,"div",3)(4,"div",4)(5,"h1",5),a(6),o(),i(7,"p",6),a(8),o()(),x(9,ue,1,3,"app-buttons",7),o()(),C(10,"hr",8),x(11,ge,4,0,"div",9)(12,Pe,4,2,"div",10)(13,ye,18,17,"div",11),o()()),e&2&&(l(6),c(t.title),l(2),c(t.subtitle),l(),s("ngIf",!t.showCreateForm&&!t.isLoading&&t.groups.length>0),l(2),s("ngIf",t.isLoading),l(),s("ngIf",!t.isLoading),l(),s("ngIf",t.showCreateForm))},dependencies:[y,Y,P,k,G,O,w,S,D,I,W,Z],styles:['[_nghost-%COMP%]{display:block;height:100%}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}.groups-container[_ngcontent-%COMP%]{max-width:1700px;margin:0 auto}.groups-header[_ngcontent-%COMP%]{margin-bottom:24px}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap}.header-text[_ngcontent-%COMP%]{flex:1;min-width:300px}.page-title[_ngcontent-%COMP%]{margin:0 0 8px;font-size:32px;color:#000;font-weight:700}.page-subtitle[_ngcontent-%COMP%]{margin:0;color:#000;font-size:16px;max-width:600px}.create-group-header-btn[_ngcontent-%COMP%], .create-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;background:purple;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:600;cursor:pointer;transition:.2s}.create-group-header-btn[_ngcontent-%COMP%]:hover, .create-button[_ngcontent-%COMP%]:hover{background:#800080e6}.create-group-header-btn[_ngcontent-%COMP%]   .create-icon[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.divider[_ngcontent-%COMP%]{border:none;height:1px;background:#e5e7eb;margin:24px 0}.loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #f3f3f3;border-top:3px solid #800080;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000;font-size:16px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.no-groups[_ngcontent-%COMP%]{text-align:center;padding:60px 40px;border:2px dashed #e5e7eb;border-radius:12px;background:#fafafa;margin:40px 0}.no-groups[_ngcontent-%COMP%]   .no-groups-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:20px}.no-groups[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;color:#000;margin:0 0 12px;font-weight:600}.no-groups[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000;font-size:16px;max-width:400px;margin:0 auto 24px}.groups-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:24px;margin-top:20px}.group-card[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;padding:20px;background:#fff;box-shadow:0 1px 3px #0000001a;display:flex;flex-direction:column;justify-content:space-between;height:100%}.group-top[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.group-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px;min-height:60px}.group-description[_ngcontent-%COMP%]{margin-top:8px;max-height:80px;overflow:hidden;line-height:1.4;font-size:14px}.group-bottom[_ngcontent-%COMP%]{margin-top:auto}.group-actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:12px}.group-title-section[_ngcontent-%COMP%]{flex:1;min-width:0}.group-name[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin-bottom:-25px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;word-break:break-word}.group-stats[_ngcontent-%COMP%]{display:flex;gap:24px;margin:20px 0;padding:12px 0;border-top:1px solid #eee;border-bottom:1px solid #eee;align-items:center}.stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2px}.stat[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:14px;opacity:.8}.stat[_ngcontent-%COMP%]   .stat-count[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#000;display:inline-block}.stat[_ngcontent-%COMP%]   .stat-date[_ngcontent-%COMP%]{color:#000;font-size:12px;opacity:.8}.group-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px;margin-top:20px}.action-button[_ngcontent-%COMP%]{flex:1 1 120px;min-width:0;max-width:100%;display:inline-flex;align-items:center;gap:6px;padding:8px 16px;border:1px solid #e0e0e0;background:#f8f8f8;border-radius:4px;font-size:14px;font-weight:500;color:#333;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:.2s}.action-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#e0e0e0}.action-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.action-button[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{font-size:14px;flex-shrink:0}.action-button[_ngcontent-%COMP%]   .count-badge[_ngcontent-%COMP%]{background:#000;color:#fff;border-radius:10px;padding:2px 8px;font-size:11px;font-weight:600;margin-left:4px}.group-join-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:8px;min-width:140px}.view-ideas-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:violet;color:#000;border:1px solid #ee82ee;border-radius:4px;font-size:14px;font-weight:600;cursor:pointer}.join-button[_ngcontent-%COMP%]{padding:8px 20px;background:purple;color:#fff;border:1px solid #800080;border-radius:4px;font-size:14px;font-weight:600;cursor:pointer}.pending-status[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100;padding:8px 12px;border-radius:4px;font-size:13px;border:1px solid #ffcc80;display:inline-flex;align-items:center;gap:6px;height:30px}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:600}.status-badge.inactive[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.status-badge.deleted[_ngcontent-%COMP%]{background:#f5f5f5;color:#757575}.admin-info[_ngcontent-%COMP%]{margin:12px 0}.admin-badge[_ngcontent-%COMP%]{background:violet;color:#000;padding:4px 12px;border-radius:4px;font-size:13px;font-weight:600;display:inline-flex;align-items:center;gap:6px}.delete-group-btn[_ngcontent-%COMP%]{background:none;border:none;color:#f44336;font-size:18px;cursor:pointer;padding:8px;border-radius:4px;transition:.2s}.delete-group-btn[_ngcontent-%COMP%]:hover{background:#f443361a}.create-group-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;padding:20px}.create-group-modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 40px #0000001a}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e5e7eb}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px;color:#000;font-weight:700}.close-button[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;color:#000;cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center}form[_ngcontent-%COMP%]{padding:24px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px;position:relative}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#333;font-size:14px;line-height:1.4}.char-counter[_ngcontent-%COMP%]{float:right;font-size:12px;font-weight:400;color:#666}.char-counter.error[_ngcontent-%COMP%]{color:#dc3545;font-weight:700}.form-group[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 14px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;font-family:inherit;transition:.2s;display:block}textarea.form-control[_ngcontent-%COMP%]{min-height:120px;resize:vertical}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:6px}.error-message[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:2px 0}.form-control[_ngcontent-%COMP%]{max-width:420px;width:100%;margin:0 auto;padding:10px 14px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;font-family:inherit;transition:.2s;display:block}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:purple;box-shadow:0 0 0 2px #8000801a}.form-control.error[_ngcontent-%COMP%]{border-color:#f44336}textarea.form-control[_ngcontent-%COMP%]{min-height:120px;resize:vertical;display:block}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px;padding-top:20px;border-top:1px solid #e5e7eb}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 24px;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:.2s}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:#fff;border:1px solid #000;color:#000}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f5f5f5}.btn-primary[_ngcontent-%COMP%]{background:purple;border:1px solid #800080;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#800080e6}@media (max-width: 768px){.groups-container[_ngcontent-%COMP%]{padding:16px}.groups-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:16px}.create-group-header-btn[_ngcontent-%COMP%], .create-button[_ngcontent-%COMP%]{width:100%;justify-content:center}.group-stats[_ngcontent-%COMP%]{flex-direction:row;gap:12px}.group-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.form-control[_ngcontent-%COMP%]{max-width:100%}}@media (max-width: 480px){.group-header[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.group-header-right[_ngcontent-%COMP%]{width:100%}.group-join-section[_ngcontent-%COMP%]{align-items:stretch}.view-ideas-button[_ngcontent-%COMP%], .join-button[_ngcontent-%COMP%]{width:100%;justify-content:center}.modal-actions[_ngcontent-%COMP%]{flex-direction:column}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}']})};export{ae as GroupsComponent};
